# 1. 三个目的
1. 接收和发送来自IP层的数据报
2. 接收和发送本层的ARP数据帧
3. 接收和发送本层的RARP数据帧

# 2. 封装
1. 48bit(6字节)的目标地址和源地址
2. ARP和RARP就是做32bit的IP地址和48bit的硬件地址之间的映射
3. 尾部封装4字节的CRC校验码

# 3. 环回接口
1. A类网络的127.0.0.1IP地址分配给环回接口，并命名为localhost

# 4. 最大传送单元MTU
1. 以太网堆数据帧的长度的最大限制为1500字节

# 5. 以太网,IEEE802.2/IEEE802.3有不同的数据帧的封装格式

# 6. ARP地址解析协议
1. 当一台主机把以太网数据帧发送到位于同一局域网的另一台主机时，**是根据48bit的以太网地址来确定目的接口的，设备驱动程序从不检测IP数据报中的目的地IP地址**
2. 地址解析ARP为32bit的IP地址和数据链路层使用的48bit提供动态映射，之所以是动态，是因为这个过程是自动完成的

## 6.1 例子
‵‵‵
$ ftp asb
‵‵‵

1. 应用程序ftp客户端，调用gethostbyname把主机名转换成32bit的IP地址，这个转换使用到/etc/hosts文件，或者DNS(域名解析系统)
2. ftp请求TCP用获取的IP地址建立连接
3. TCP发送一个连接请求到远端主机==>用IP地址发送一个IP数据报
4. 假定是以太网，则发送端会把32bit的IP地址转换成48bit的以太网地址(ARP做的事情)
5. **ARP发送一份称为ARP请求的以太网数据帧给以太网上的每个主机==>广播**
> ARP请求数据帧中包含目的地主机的IP地址==>**如果你是这个IP地址的拥有者，请回答你的硬件地址**
6. 目标主机的ARP层收到这个广播报文后，识别出这是发送端在询问它的IP地址，于是发送一个ARP应答==>**这个应答包含IP地址及对应的硬件地址**
7. 收到ARP应答后，使ARP进行请求-应答交换的IP数据报先在就可以传送了
8. 发送IP数据报到目标主机

## 6.2 原理
ARP在32bit的IP地址和采用不同网络技术的硬件地址之间提供动态映射      

## 6.3 ARP高速缓存
存放最近IP地址到硬件地址之间的映射记录，其中每条记录的生存时间一般为20分钟

```
$ arp -a
```

-----
# 7. RARP-逆地址解析协议